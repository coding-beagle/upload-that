<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <title>UploadThat</title>
</head>
<body>
  <div class="container">
    <button id="new-session-button" class="btn btn-primary" style="position: fixed; top: 10px; left: 10px;">Start a New Session</button>    
    <h1 class="mt-4">UploadThat</h1>
    <p>Transferring files between devices made easy.</p>

    <div class="btn-container">
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#qrCodeModal">
        <i class="fas fa-qrcode"></i>
      </button>
    
      <button class="btn btn-primary privacy-btn" data-toggle="modal" data-target="#privacyModal">
        <i class="fas fa-lock"></i>
      </button>      
    </div>
    
    <div id="privacy-modal" class="privacy-modal">
      <div class="privacy-modal-header">Privacy</div>
      <div class="privacy-modal-content">
        We use AES-256 encryption when files are uploaded to our system. That means even if someone intercepted your file, they would need more time than the age of the universe to decrypt it... and that's if they were lucky! Files are deleted once everyone in the session disconnects or after a certain time period. So, rest easy knowing your files are safe and sound.
      </div>
      <button class="btn privacy-btn" onclick="togglePrivacyModal()">Close</button>
    </div>

    <div id="qr-code" class="mt-4"></div>
    <div class="file-upload-area mt-4">
      <label for="file-input" class="btn btn-primary">
        <i class="fas fa-upload fa-2x"></i>
      </label>
      <input type="file" id="file-input" class="d-none">
    </div>
    <div class="file-list mt-4">
      <!-- Files will be displayed here -->
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.0.3/html5-qrcode.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.socket.io/4.4.1/socket.io.min.js" crossorigin="anonymous"></script>
  <script src="share.js" type="module"></script>

  <div class="loader-container" id="loader-container">
    <div class="loader" id="loader"></div>
  </div>

  <div class="modal fade" tabindex="-1" role="dialog" id="qrCodeModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="qrCodeModalLabel">Scan this QR code!</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="d-flex justify-content-center align-items-center">
            <div id="qr-code-modal" class="text-center"></div>
          </div>
          <div class="input-group mt-3">
            <input type="text" class="form-control" id="qr-code-link" readonly>
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" type="button" id="copy-link-btn">Copy</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>  

  <div class="modal fade" tabindex="-1" role="dialog" id="privacyModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>
            Here at UploadThat, we value your privacy and the security of your files. 
            All files are encrypted using AES encryption before they are uploaded. 
            That's like trying to find a needle in not just one, but hundreds of haystacks!
          </p>
          <p>
            Files are deleted after everyone in the session disconnects, or after a certain time period. 
            We care about your privacy as much as you do!
          </p>
        </div>
      </div>
    </div>
  </div>  
  
</body>
</html>
